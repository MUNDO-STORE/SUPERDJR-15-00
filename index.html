<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundo Store Chat | Live & Bate-papo</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --accent: #00cec9;
            --glass: rgba(255, 255, 255, 0.1);
            --dark-glass: rgba(0, 0, 0, 0.7);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }

        body {
            background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #6c5ce7);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: white;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Modal de Entrada */
        #welcomeModal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: var(--dark-glass);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid var(--primary);
            max-width: 400px;
            width: 90%;
        }

        .modal-content h2 { margin-bottom: 20px; color: var(--accent); }
        .modal-content input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border-radius: 8px;
            border: none;
            outline: none;
        }

        /* Layout Principal */
        .main-wrapper {
            display: grid;
            grid-template-columns: 1fr 350px;
            height: 100vh;
            padding: 20px;
            gap: 20px;
        }

        /* √Årea do V√≠deo */
        .video-container {
            position: relative;
            background: black;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        #localVideo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transform: scaleX(-1);
        }

        .video-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        /* Chat */
        .chat-container {
            background: var(--dark-glass);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--glass);
        }

        .chat-header {
            padding: 15px;
            background: var(--primary);
            border-radius: 15px 15px 0 0;
            font-weight: bold;
        }

        #chatMessages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .msg {
            background: var(--glass);
            padding: 8px 12px;
            border-radius: 10px;
            font-size: 0.9rem;
            max-width: 80%;
        }

        .msg b { color: var(--accent); }

        .chat-input-area {
            padding: 15px;
            display: flex;
            gap: 10px;
        }

        .chat-input-area input {
            flex: 1;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass);
            padding: 10px;
            border-radius: 5px;
            color: white;
        }

        /* Bot√µes */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.3s;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-toggle { background: #e74c3c; color: white; }
        .btn-toggle.on { background: #2ecc71; }

        @media (max-width: 900px) {
            .main-wrapper { grid-template-columns: 1fr; overflow-y: auto; }
            .chat-container { height: 400px; }
        }
    </style>
</head>
<body>

<div id="welcomeModal">
    <div class="modal-content">
        <h2>Mundo Store Chat</h2>
        <p>Bem-vindo! Como deseja ser chamado?</p><br>
        <input type="text" id="usernameInput" placeholder="Seu apelido...">
        <button class="btn btn-primary" onclick="entrarNoChat()">ENTRAR AGORA</button>
    </div>
</div>

<div class="main-wrapper">
    <div class="video-container">
        <video id="localVideo" autoplay playsinline muted></video>
        
        <div class="video-controls">
            <button id="camBtn" class="btn btn-toggle on" onclick="toggleCam()">üì∑ C√¢mera</button>
            <button id="micBtn" class="btn btn-toggle on" onclick="toggleMic()">üé§ Mic</button>
            <button class="btn btn-primary" onclick="alert('Conecte o OBS via C√¢mera Virtual')">OBS Studio</button>
        </div>
    </div>

    <div class="chat-container">
        <div class="chat-header">üó®Ô∏è Chat ao Vivo</div>
        <div id="chatMessages">
            <div class="msg"><b>Sistema:</b> Bem-vindo ao Mundo Store Chat!</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Digite uma mensagem...">
            <button class="btn btn-primary" onclick="sendMessage()">Enviar</button>
        </div>
    </div>
</div>

<script>
    let stream;
    let userName = "Usu√°rio";

    // Fun√ß√£o para entrar e fechar o modal
    async function entrarNoChat() {
        const input = document.getElementById('usernameInput');
        if(input.value.trim() !== "") {
            userName = input.value;
            document.getElementById('welcomeModal').style.display = 'none';
            startMedia();
        } else {
            alert("Por favor, digite um nome!");
        }
    }

    // Acessar C√¢mera e Microfone
    async function startMedia() {
        try {
            stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            document.getElementById('localVideo').srcObject = stream;
        } catch (err) {
            console.error("Erro:", err);
            alert("Erro ao acessar c√¢mera. Verifique as permiss√µes.");
        }
    }

    // Controles de M√≠dia
    function toggleCam() {
        const track = stream.getVideoTracks()[0];
        track.enabled = !track.enabled;
        document.getElementById('camBtn').classList.toggle('on');
    }

    function toggleMic() {
        const track = stream.getAudioTracks()[0];
        track.enabled = !track.enabled;
        document.getElementById('micBtn').classList.toggle('on');
    }

    // L√≥gica do Chat (Simula√ß√£o local)
    function sendMessage() {
        const input = document.getElementById('chatInput');
        const chatMessages = document.getElementById('chatMessages');
        
        if(input.value.trim() !== "") {
            const newMsg = document.createElement('div');
            newMsg.className = 'msg';
            newMsg.innerHTML = `<b>${userName}:</b> ${input.value}`;
            chatMessages.appendChild(newMsg);
            
            // Scroll autom√°tico para o fim
            chatMessages.scrollTop = chatMessages.scrollHeight;
            input.value = "";
        }
    }

    // Enviar com tecla Enter
    document.getElementById('chatInput').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') sendMessage();
    });
</script>

</body>
</html>
